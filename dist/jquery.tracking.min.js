/*! jquery.tracking v1.0.2 | MIT */

(function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},r=[].slice,i=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};this.JqueryTrackingGAnalyticsAdapter=function(){function t(t){this.options=t,this.trackConversion=n(this.trackConversion,this),this.trackClick=n(this.trackClick,this),window.ga=window.ga||function(){return(ga.q=ga.q||[]).push(arguments)},window.ga.l=+new Date}return t.prototype.trackEvent=function(t,e,n,r){return window.ga("send","event",t,e,n,r)},t.prototype.trackClick=function(t){return this.trackEvent("button","click",t)},t.prototype.trackConversion=function(){return this.trackEvent("advertsing","conversion")},t}(),this.JqueryTrackingFacebookAdapter=function(){function e(t){this.options=t}return e.prototype.trackEvent=function(t,e,n,r){if("undefined"!=typeof fbq&&null!==fbq)return fbq("track","ViewContent",{content_type:e,content_name:n,content_category:t,value:r})},e.prototype.trackClick=function(t){if("undefined"!=typeof fbq&&null!==fbq)return fbq("track","ViewContent",{content_type:"source"})},e.prototype.trackConversion=function(){if("fb"===t.tracking.channel&&(console.log("!!!FB tracked"),"undefined"!=typeof fbq&&null!==fbq))return fbq("track","Lead")},e}(),this.JqueryTracking=function(){function t(t){this.options=t,this.restorParams=n(this.restorParams,this),this.storeParams=n(this.storeParams,this),this.setCampaign=n(this.setCampaign,this),this.setChannel=n(this.setChannel,this),this.conversion=n(this.conversion,this),this.click=n(this.click,this),this.event=n(this.event,this),this.remember=n(this.remember,this),this.wasAllreadyTracked=n(this.wasAllreadyTracked,this),this.callAdapters=n(this.callAdapters,this),this.trackBounce=n(this.trackBounce,this),this.loadAdapter=n(this.loadAdapter,this),this.config=n(this.config,this),this.adapter=[],this.memory=[],this.channel="",this.campaign="",this.config(jQuery.extend(this.options,this.constructor.options)),this.loadAdapter(),this.storeParams(),this.restorParams(),this.options.trackBounceIntervalSeconds&&this.trackBounce(this.options.trackBounceIntervalSeconds)}return t.options={trackBounceIntervalSeconds:10,sessionLifeTimeDays:1,cookiePrefix:"tracking_",cookiePath:".example.com",sourceParamName:"src",campaignParamName:"cmp",storageParams:{src:"organic",cmp:"organic"},adapter:[{class:"JqueryTrackingGAnalyticsAdapter"},{class:"JqueryTrackingFacebookAdapter"}]},t.prototype.config=function(t){return t&&(this.options=jQuery.extend(!0,{},this.options,t)),this.options},t.prototype.debug=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],(n=jQuery.debug).log.apply(n,["jquery.tracking::"+e].concat(r.call(t)))},t.prototype.loadAdapter=function(){var t,e,n,r,i;for(i=[],e=0,n=(r=this.options.adapter).length;e<n;e++)(t=r[e]).class in window?(this.debug("loadAdapter",t.class),i.push(this.adapter.push(new window[t.class](t)))):i.push(this.debug("can not loadAdapter",t.class));return i},t.prototype.trackBounce=function(t){var e,n;return n=0,(e=function(r){return function(){var i;return n&&(i=(n*t).toString()+"s",r.event("adjust bounce rate",i)),n++,setTimeout(e,1e3*t)}}(this))()},t.prototype.callAdapters=function(){var t,e;return e=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],jQuery.each(this.adapter,function(n){return function(i,o){return n.debug.apply(n,[o.options.class+"::"+e].concat(r.call(t))),o[e].apply(o,t)}}(this))},t.prototype.wasAllreadyTracked=function(t,e){return i.call(this.memory,id)>=0},t.prototype.remember=function(t){return this.memory.push(t)},t.prototype.event=function(t,e,n,r,i){var o;if(o=t+"."+e+"."+n+"."+r,!i||!this.wasAllreadyTracked(o))return this.remember(o),this.callAdapters("trackEvent",t,e,n,r)},t.prototype.click=function(t){return this.callAdapters("trackClick",t)},t.prototype.conversion=function(){return this.callAdapters("trackConversion")},t.prototype.setChannel=function(t){return this.channel=t,this.event("advertising","channel",this.channel)},t.prototype.setCampaign=function(t){return this.campaign=t,this.event("advertising","campaign",this.campaign)},t.prototype.storeParams=function(){return jQuery.each(this.options.storageParams,function(t){return function(e,n){var r,i;if(r=Cookies.get(""+t.options.cookiePrefix+e),i=url("?"+e)||r||n,r!==i)return t.debug("storeParam::"+t.options.cookiePrefix,e+"="+i),Cookies.set(""+t.options.cookiePrefix+e,i,{path:t.options.cookiePath,expires:t.options.sessionLifeTimeDays})}}(this))},t.prototype.restorParams=function(){return jQuery.each(this.options.storageParams,function(t){return function(e,n){var r;if(r=Cookies.get(""+t.options.cookiePrefix+e)||n)switch(e){case t.options.sourceParamName:return t.setChannel(r);case t.options.campaignParamName:return t.setCampaign(r);default:return t.event("parameter",e,r)}}}(this))},t}(),"undefined"!=typeof jQuery&&(e=new JqueryTracking,(t=jQuery).extend({tracking:function(){var t;return(t=1<=arguments.length?r.call(arguments,0):[]).length?e.config(t[0]):e.config()}}),t.extend(t.tracking,e),t.tracking.instance=e)}).call(this);